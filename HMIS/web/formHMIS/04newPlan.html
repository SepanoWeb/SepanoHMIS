
<div class="sh-breadcrumb">
    <nav class="breadcrumb">
        <a class="breadcrumb-item" href="http://medyarweb.ir">مدیار</a>
        <a class="breadcrumb-item" href="http://medyarweb.ir">MedYar</a>
        <span class="breadcrumb-item active">برنامه عملیاتی هوشمند</span>
    </nav>
</div><!-- sh-breadcrumb -->
<div class="sh-pagetitle">
    <!--        <div class="input-group">
                <input type="search" class="form-control" placeholder="Search">
                <span class="input-group-btn">
                    <button class="btn"><i class="fa fa-search"></i></button>
                </span> input-group-btn
            </div> input-group -->
    <div class="sh-pagetitle-left">
        <div class="sh-pagetitle-icon"><i class="icon ion-ios-gear mg-t-3"></i></div>
        <div class="sh-pagetitle-title">
            <span>برنامه عملیاتی</span>
            <h2>ماژول برنامه عملیاتی/بهبود کیفیت </h2>
        </div><!-- sh-pagetitle-left-title -->
    </div><!-- sh-pagetitle-left -->
</div><!-- sh-pagetitle -->

<div class="card bd-primary">
    <div onclick=" if ($('#newFormPlans').css('display') == 'none') {
                $('#newFormPlans').slideDown();
            } else {
                $('#newFormPlans').slideUp();
            }"
         class="slideToggle card-header bg-primary tx-white">عنوان و توضیحات برنامه عملیاتی/بهبود کیفیت</div>
    <div  id="newFormPlans" >
        <div class="card-body pd-sm-30">
            <p class="mg-b-20 mg-sm-b-30">برنامه عملیاتی بصورت سالیانه بر اساس اهداف کلی و جزئی و استراتژی های سازمان برگرفته از برنامه استراتژیک تدوین می گردد</p>
            <p class="mg-b-20 mg-sm-b-30">برنامه بهبود کیفیت در راستای ارتقا کیفیت خدمات ، اصلاح  فرآیند ها و مدیریت بهینه منابع
                تدوین
            </p>
            <br/>
            <div class="row">
                <input type="hidden" id='hmis_plans_id' name='id'>
                <div class="col-lg-4">
                    مافوق

                    <select class="form-control" id="plans_supervisorRolId" name="plans_supervisorRolId">
                        <option value="" selected disabled hidden>مافوق را انتخاب کنید</option>
                        <option value="مترون">مترون</option>
                        <option value="رئیس امور عمومی">رئیس امور عمومی</option>
                        <option value="مدیر مالی">مدیر مالی</option>
                    </select>
                </div>
                <!--این قسمت از برنامه استراتژیک بارگذاری می گردد-->
                <div class="col-lg-4" style="float: left">
                    نوع برنامه
                    <!--فرم بهبود کمی با فرم عملیات اصلاحی تفاوت دارد-->
                    <select class="form-control" id='plans_typeOfProgram' name='plans_typeOfProgram' onchange="if ($(this).val() == 'برنامه بهبود کیفیت') {
                                $('#planImprovementDiv').slideDown();
                            } else {
                                $('#planImprovementDiv').slideUp();
                            }
                            ">
                        <option value="برنامه عملیاتی">برنامه عملیاتی</option>
                        <option value="برنامه بهبود کیفیت">برنامه بهبود کیفیت</option>
                    </select>
                </div>
                <div class="col-lg-4" style="float: left">
                    بخش/واحد
                    <!--آپسن ها را از جدول بخش ها بیاورد-->
                    <select class="form-control"  name='plans_department' id='plans_department'>
                    </select>
                </div>
                <div class="col-lg-4" style="float: left">
                    وضعیت
                    <select name="plans_status"  id='plans_status' class="form-control" disabled="disabled">
                        <option value="ثبت اولیه">ثبت اولیه</option>
                        <option value="تایید">تایید</option>
                        <option value="ارسال به کمیته مدیریت اجرایی">ارسال به کمیته مدیریت اجرایی</option>
                    </select>
                </div>
                <div class="col-lg-4" style="float: left">
                    روند وضعیت:
                    <br/>
                    <a href="#" class="btn btn-outline-dark btn-icon mg-r-5"><div style="font-size: 18px"><i class="icon ion-loop" onclick="$('#statusLog').slideDown();"></i></div></a>
                </div>
                <div class="col-lg-4">
                    <div id='statusLog' class='form-control' style='display: none'></div>
                </div>
            </div><!-- row -->
            <br/>
            <!--        <div id="ProgramAmaliatyDiv">-->
            <div class="row">
                <!--این قسمت از برنامه استراتژیک بارگذاری می گردد-->
                <div class="col-lg">
                    هدف کلان
                    <select class="form-control" name='plans_hugeGoal' id='plans_hugeGoal'>
                        <option value="">انتخاب</option>
                        <option value="1">ارتقا سطح کیفیت و ایمنی خدمات  بالینی و غیر بالینی</option>
                        <option value="2">افزایش بهره وری ،  بهبود شرایط نگهداشت و توسعه زیر ساخت های ارائه خدمات</option>
                        <option value="3">کاهش میزان عفونت های بیمارستانی به میزان 5% در سال  نسبت به سال قبل</option>
                        <option value="4"> ارتقا کیفیت نظام آموزشی و ارزشیابی بر اساس استاندارد های اعتبار بخشی آموزشی </option>
                    </select>
                </div>

            </div><!-- row -->
            <div class="row">
                <!--این قسمت از برنامه استراتژیک بارگذاری می گردد-->
                <div class="col-lg">
                    هدف جزئی
                    <select class="form-control" id='plans_minorGoal' name='plans_minorGoal'>
                        <option value="">انتخاب</option>
                        <option value="ارتقا ایمنی سازه ای ، غیر سازه ای و عملکردی به میزان10% در سال نسبت به سال قبل">ارتقا ایمنی سازه ای ، غیر سازه ای و عملکردی به میزان10% در سال نسبت به سال قبل</option>
                        <option value="کاهش میزان عفونت های بیمارستانی به میزان 5% در سال  نسبت به سال قبل">کاهش میزان عفونت های بیمارستانی به میزان 5% در سال  نسبت به سال قبل</option>
                        <option value="کاهش میزان عفونت های بیمارستانی به میزان 5% در سال  نسبت به سال قبل">کاهش میزان عفونت های بیمارستانی به میزان 5% در سال  نسبت به سال قبل</option>
                        <option value="پیاده سازی استانداردهای بیمارستان دوستدار ایمنی و اعتباربخشی  وارتقا آگاهی و عملکرد کارکنان در راستای اجرای بهینه استاندارد های مربوطه به میزان 10%در سال 1396 نسبت به سال قبل">پیاده سازی استانداردهای بیمارستان دوستدار ایمنی و اعتباربخشی  وارتقا آگاهی و عملکرد کارکنان در راستای اجرای بهینه استاندارد های مربوطه به میزان 10%در سال 1396 نسبت به سال قبل</option>
                    </select>
                </div>
            </div>
            <div class="row">
                <!--این قسمت از برنامه استراتژیک بارگذاری می گردد-->
                <div class="col-lg">
                    استراتژی
                    <select class="form-control" id='plans_strategic' name="plans_strategic">
                        <option value="">انتخاب</option>
                        <option value="ارتقا ایمنی سازه ای ، غیر سازه ای و عملکردی به میزان10% ">ارتقا ایمنی سازه ای ، غیر سازه ای و عملکردی به میزان10% در سال نسبت به سال قبل</option>
                        <option value="کاهش میزان عفونت های بیمارستانی به میزان 5% در سال  نسبت به سال قبل">کاهش میزان عفونت های بیمارستانی به میزان 5% در سال  نسبت به سال قبل</option>
                        <option value="کاهش میزان عفونت های بیمارستانی به میزان 5% در سال  نسبت به سال قبل">کاهش میزان عفونت های بیمارستانی به میزان 5% در سال  نسبت به سال قبل</option>
                        <option value="پیاده سازی استانداردهای بیمارستان دوستدار ایمنی و اعتباربخشی  وارتقا آگاهی و عملکرد کارکنان در راستای اجرای بهینه استاندارد های مربوطه به میزان 10% در سال 1396نسبت به سال قبل ">پیاده سازی استانداردهای بیمارستان دوستدار ایمنی و اعتباربخشی  وارتقا آگاهی و عملکرد کارکنان در راستای اجرای بهینه استاندارد های مربوطه به میزان 10% در سال 1396نسبت به سال قبل </option>
                    </select>
                </div>
            </div>
            <div class="row">
                <div id="planImprovementDiv" style="display: none">
                    <div class="col-lg">
                        عنوان مشکل
                        <input class="form-control" id='plans_titleOfTheProblem' name='plans_titleOfTheProblem' placeholder="عنوان مشکل" type="text">
                    </div>
                    <div class="col-lg">
                        علت مشکل
                        <input class="form-control" id="plans_causeProblem"  name="plans_causeProblem" placeholder="علت مشکل" type="text">
                    </div>
                    <div class="col-lg">
                        شیوه شناسایی مشکل
                        <input class="form-control" id="plans_method" name="plans_method" placeholder="شیوه شناسایی مشکل" type="text">
                    </div>
                </div>
                <div class="col-lg">
                    عنوان برنامه عملیاتی
                    <input class="form-control" id='plans_title' name='plans_title' placeholder="عنوان برنامه عملیاتی" type="text">
                </div>
                <div class="col-lg">
                    حیطه:
                    <input class="form-control" id='plans_range' name='plans_range' placeholder="مدیریتی یا بالینی یا پاراکلینیک یا پشتیبانی" type="text">
                </div>
                <div class="col-lg">
                    دامنه:
                    <select class="form-control" id="plans_domain" name='plans_domain'>
                        <!--این آپشن ها را از قسمت مدیریت بخش ها بصورت اتوماتیک می آوریم-->
                        <!--                        <option value="">انتخاب بخش</option>
                                                <option value="1">جراحی</option>
                                                <option value="2">داخلی</option>
                                                <option value="3">زنان</option>
                                                <option value="4">مردان</option>
                                            </select>-->
                </div>
            </div><!-- row -->
            <div class="row">
                <div class="col-lg-4">
                    مسئول پایش
                    <input class="form-control" name='plans_responsible' id='plans_responsible' placeholder="مدیریتی یا بالینی یا پاراکلینیک یا پشتیبانی" type="text">
                </div>
                <div class="col-lg-4">
                    دوره پایش
                    <select class="form-control" id='plans_thePeriodAssess' name='plans_thePeriodAssess'>
                        <option value="">انتخاب</option>
                        <option value="1">سه ماهه</option>
                        <option value="2">شش ماه</option>
                        <option value="3">سالیانه</option>
                    </select>
                </div>
            </div><!-- col -->

        </div><!-- row -->

        <!-- row -->
        <div class="row mg-t-20">
            <div class="col-lg">
                <textarea rows="3" class="form-control" id='plans_description' name='plans_description' placeholder="توضیحات برنامه عملیاتی"></textarea>
            </div><!-- col -->
        </div><!-- row -->
        <!--</div> programAmaliatyDiv-->
        <div class="col-lg-3" id="buttonRecord">
        </div>
        <div id="editPlansDiv" class="col-lg-12">
        </div>
    </div><!-- div newFormPlans  -->
</div><!-- card -->
<div id="formQuestions" style="display: none">
    <div class="card bd-primary mg-t-20" id="newFormQuestion">
        <div class="card-header bg-primary tx-white">مدیریت گام های اجرایی:</div>
        <div id="stepsForm1" class="card-body pd-sm-30">
            <!--            <div class='card-body pd-sm-30'>
                            <p class='mg-b-20 mg-sm-b-30'>
                                <a  id='btn_addNewSteps' class="btn btn-success pd-sm-x-20 mg-sm-r-5 tx-white" style='color:#fff;' onclick="$('#stepsForm').slideDown();new jj('#stepsForm').jjFormClean();$('#btn_insertSteps').slideDown();$('#btnEditDiv').slideUp();" > گام جدید</a>
                            </p>
                        </div>-->

            <div id="stepsForm" class="card-body pd-sm-30">

                <input id="hmis_steps_id" name="hmis_steps_id" type="hidden"/>

                <!--<div>-->
                <p class="mg-b-20 mg-sm-b-30">گام های اجرایی با توجه به مراحل پیش بینی شده اجرای برنامه تعیین می گردند</p>
                <div class="row">
                    <div class="col-lg">
                        <div class="form-group has-success mg-b-0">
                            عنوان:
                            <input id="steps_title" name="steps_title" class="form-control is-valid" placeholder="عنوان:" type="text">
                        </div><!-- form-group -->
                    </div><!-- col -->
                    <div class="col-lg-6">
                        <div class="form-group has-warning mg-b-0">
                            مسئول پیگیری
                            <select id="steps_trackerId" name="steps_trackerId" class="form-control">
                            </select>
                        </div><!-- form-group -->
                    </div><!-- col -->
                    <!--/////////////////////////////////////////////////////-->
                    <div class="col-lg-6">
                        <div class="form-group has-warning mg-b-0">
                            <input onchange="hmisPlans.executorAction($(this).val());"  type="radio" checked="checked" id="roleExecutor" name="responsibleExecutor" value="سمت">
                            انتخاب سمت مسئول اجرا
                            <select id="steps_executorRoleId"  multiple="" name="steps_executorRoleId" class="form-control select2 select2-hidden-accessible">
                                <!--در واقع از جدول اشخاص باید بیاورد-->
                            </select>
                        </div><!-- form-group -->
                    </div><!-- col -->
                    <div class="col-lg-6">
                        <div class="form-group has-warning mg-b-0">

                            انتخاب اشخاص مسئول اجرا <input type="radio" onchange="hmisPlans.executorAction($(this).val());" id="userExecutor" name="responsibleExecutor" value="کاربران">
                            <select id="steps_executorUserId" multiple="" name="steps_executorUserId" class="form-control select2 select2-hidden-accessible">
                                <!--در واقع از جدول اشخاص باید بیاورد-->
                            </select>
                        </div><!-- form-group -->
                    </div><!-- col -->
                    <!--/////////////////////////////////////////////////////-->
                    <!--                    <div class="col-lg mg-t-20 mg-lg-t-0">
                                            <div class="form-group has-warning mg-b-0">
                                                مسئول اجرا:
                                                <select class="form-control" id="steps_executorId" name="steps_executorId">
                                                    این آپشن ها را از قسمت مسئولان باید بیاوریم
                    
                                                </select>
                                            </div> form-group 
                                        </div> col -->
                    <!--                    <div class="col-lg mg-t-20 mg-lg-t-0">
                                            <div class="form-group has-warning mg-b-0">
                                                مسئول پیگیری:
                                                <select class="form-control" id="steps_trackerId" name="steps_trackerId">
                                                    این آپشن ها را از قسمت مسئولان باید بیاوریم
                    
                                                </select>
                                            </div> form-group 
                                        </div> col -->
                </div><!-- row -->
                <div class="row">
                    <div class="col-lg">
                        تاریخ شروع:
                        <div class="form-group has-success mg-b-0">
                            <input id="steps_startDate" name="steps_startDate" class="form-control is-valid" placeholder="تاریخ شروع را وارد کنید" type="text">
                        </div><!-- form-group -->
                    </div><!-- col -->
                    <div class="col-lg">
                        تاریخ پایان:
                        <div class="form-group has-success mg-b-0">
                            <input id="steps_endDate" name="steps_endDate" class="form-control is-valid" placeholder="تاریخ پایان را وارد کنید" type="text">
                        </div><!-- form-group -->
                    </div><!-- col -->
                    <div class="col-lg">
                        سایر شاخص ها:
                        <div class="form-group has-success mg-b-0">
                            <input id="steps_otherIndicators" name="steps_otherIndicators" class="form-control is-valid" placeholder="مصاحبه و مشاهده" type="text">
                        </div><!-- form-group -->
                    </div><!-- col -->
                </div>
                <div class="row">
                    <div class="col-lg-4">
                        هزینه:
                        <div class="form-group has-success mg-b-0">
                            <input class="form-control is-valid" id="steps_cost" name="steps_cost" placeholder="هزینه" type="text">
                        </div><!-- form-group -->
                    </div><!-- col -->

                </div>
                <div class="row">
                    <div class="col-lg-4">
                        درصد از کل:
                        <div class="form-group has-success mg-b-0">
                            <input  class="form-control is-valid"  min="0" max="100" id="steps_percent" name="steps_percent"   type="number" value="" />

                        </div><!-- form-group -->
                    </div><!-- col -->

                </div>
                <div class="row" id="decriptionStepsDiv" style="display:none">
                    <div class="col-lg-4">
                        توضیحات مسئول پیگیری:
                        <div class="form-group has-success mg-b-0">
                            <input  class="form-control is-valid"  id="stepsInPlans_descriptionTracker" name="steps_descriptionTracker"   type="text" />

                        </div><!-- form-group -->
                    </div><!-- col -->
                    <div class="col-lg-4">
                        توضیحات مسئول اجرا:
                        <div class="form-group has-success mg-b-0">
                            <input  class="form-control is-valid" id="stepsInPlans_descriptionExecutor" name="steps_descriptionExecutor"    type="text"/>

                        </div><!-- form-group -->
                    </div><!-- col -->

                </div>
                <div class="row">
                    <div class="col-lg-12" style="">

                        <input id="steps_files" name="steps_files" type="hidden">
                        <input id="steps_filesTitle" name="steps_filesTitle" type="hidden">
                        <div id="inputAfterSelectGauge" ></div>
                        <div  id="inputTextSelectorDiv" ></div>
                        <div  id="inputTitleSelectorDiv" ></div>
                        <div  id="showFilesDiv" ></div>

                        <div class="input-group">

                            <input class="btn btn-primary" id="sendFiles" type="submit" value="ارسال">
                            <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();">انتخاب فایل</span>
                            <input id="attachFileSteps" name="attachFileSteps" onchange="$(this).parent().parent().find('.form-control').html($(this).val().split(/[\\|/]/).pop());" style="display: none;" type="file">
                            <!--<span class="form-control"></span>-->
                        </div>
                        عنوان فایل
                        <input id="steps_titleFile1" name="steps_titleFile1"  style="display: block;
                               width: 100%;
                               padding: 0.65rem 0.75rem;
                               font-size: 1.3em;
                               line-height: 1.25;
                               color: #495057;
                               background-color: #fff;
                               background-image: none;
                               background-clip: padding-box;
                               border: 1px solid rgba(0, 0, 0, 0.15);
                               border-radius: 3px;
                               transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;" />
                        <span id="user_pic" class="form-control"></span>
                        <div id="filesDownloadStepsDiv"></div>
                    </div>










                    <!--                    <div class="col-lg-3">
                                            بارگذاری مستندات:<br/>
                                            <input id="plans_files" name="plans_files" type="hidden" />
                                            <img id="PicPreviewAttach"  class="img-thumbnail"  src="img/preview.jpg" style=""/>
                                            <div class="row">
                                                <input class="btn btn-primary" id="sendFilesPlans" type="submit" value="ارسال">
                                                <span class="btn btn-primary" onclick="$(this).parent().find('input[type=file]').click();">انتخاب فایل</span>
                                                <input id="attachFilesPlans" name="attachFilesPlans" onchange="$(this).parent().find('span.form-control').html($(this).val().split(/[\\|/]/).pop());" style="display: none;" type="file">
                                                <span class="form-control col-lg"></span>
                                            </div>
                                        </div>-->
                </div>
                <div class="row">
                    <div class="col-lg-3" id="inputFilesPlansDiv"></div>
                </div>
                <div class="row mg-t-20">
                    <div class="col-lg-3">
                        <div class="form-group has-success mg-b-0">
                            <button class="btn btn-outline-secondary mg-b-10  btn-block" onclick="$('#stepsForm').slideUp();">لغو</button>
                        </div><!-- form-group -->
                    </div><!-- col -->
                    <div class='col-lg-6' id='steps_button'></div>
                    <!--                    <div class="col-lg-3">
                                            <button id='btn_insertSteps' class="btn btn-outline-success  btn-block mg-b-10" onclick="hmisSteps.m_insert();">ثبت گام</button>
                                        </div> col -->

                </div>

            </div><!-- stepsForm -->
        </div><!-- stepsForm1 -->
        <div class="col-lg-12">

            <div  id="tblSteps" ></div>

        </div>
        <br/>

        <div class="row">


            <div class="col-lg-12" style="margin-bottom: 1px">
                <div class="card-header bg-primary tx-white">هدف کلان:
                    <div class="card-header bg-primary tx-white"  id="hugeGoal"></div>
                </div>
            </div>
            <div class="col-lg-12" style="margin-bottom: 1px">
                <div class="card-header bg-primary tx-white">هدف جزئی:
                    <div  id="minorGoal"></div>
                </div>
            </div>
            <div class="col-lg-12" style="margin-bottom: 1px">
                <div class="card-header bg-primary tx-white">استراتژی:
                    <div  id="strategic"></div>
                </div>
            </div>
            <div class="col-lg-4" >
                <div class="card-header bg-primary tx-white">حیطه:
                    <div  id="range"></div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="card-header bg-primary tx-white">دوره پایش:
                    <div  id="thePeriodAssess"></div>
                </div>
            </div>
            <div class="col-lg-4">
                <div class="card-header bg-primary tx-white">مسئول پایش:
                    <div  id="responsible"></div>
                </div>
            </div>
            <!--</div>-->
            <!--<div class="row row-sm">-->

            <div style="display:contents" id= 'btns_plans'></div>
            <br/>

        </div><!-- row -->

    </div><!-- newFormQuestion-->
</div> <!-- formquestion-->
<div id="correctionForm" style="display: none;" class="row">
    <div class="col-lg-12">
        توضیحات اصلاحیه:<textarea class="form-control is-valid" id="plans_correction" name="plans_correction" ></textarea>
    </div>
    <div class="col-lg-2">
        <div class="form-group has-success mg-b-0">
            <button id="referrals_Plans" onclick="hmisPlans.actionReferral();" class="btn btn-secondary btn-block mg-b-10">ارجاع</button>
            <!--//دکمه ارجاع-->
        </div>
    </div>
</div>
<br/>
<div class="row">
    <div class="col-lg-2">
        <div class="form-group has-success mg-b-0">
            <button id="cancel_Plans" class="btn btn-outline-secondary mg-b-10  btn-block">بازگشت</button>
        </div>
    </div>

</div><!-- card -->


<script>
    $(document).ready(function () {
        $('.custom-file-input').on('change', function () {
            var fileName = document.getElementById("exampleInputFile").files[0].name;
            $(this).next('.form-control-file').addClass("selected").html(fileName);
        });
    });</script>

<script>
    $('#steps_executorRoleId').select2({minimumResultsForSearch: '', width: '100%'});
    $('#steps_executorUserId').select2({minimumResultsForSearch: '', width: '100%'});
</script>